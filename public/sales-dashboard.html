<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Sales Analytics Dashboard â€” Muhamad Irpan Yasin</title>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
  :root {
    --cyan: #00f0ff;
    --magenta: #ff00ea;
    --yellow: #ffed4e;
    --blue: #0066ff;
    --dark: #050508;
    --card: #0d0d14;
    --card2: #111118;
    --border: rgba(0,240,255,0.15);
    --text: #ffffff;
    --muted: #7a7a9a;
  }

  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

  html { scroll-behavior: smooth; }

  body {
    font-family: 'Rajdhani', sans-serif;
    background: var(--dark);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* â”€â”€ GRID BG â”€â”€ */
  body::before {
    content: '';
    position: fixed; inset: 0; z-index: 0;
    background-image:
      linear-gradient(rgba(0,240,255,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0,240,255,0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
  }

  /* â”€â”€ SCAN LINE â”€â”€ */
  body::after {
    content: '';
    position: fixed; left: 0; width: 100%; height: 2px; z-index: 0;
    background: linear-gradient(90deg, transparent, var(--cyan), transparent);
    opacity: 0.3;
    animation: scan 8s linear infinite;
    pointer-events: none;
  }
  @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }

  /* â”€â”€ HEADER â”€â”€ */
  header {
    position: sticky; top: 0; z-index: 100;
    background: rgba(5,5,8,0.92);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--border);
    padding: 1rem 2rem;
    display: flex; align-items: center; justify-content: space-between;
    box-shadow: 0 4px 30px rgba(0,0,0,0.5);
  }

  .header-left { display: flex; align-items: center; gap: 1rem; }

  .logo-text {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.1rem;
    font-weight: 900;
    background: linear-gradient(135deg, var(--cyan), var(--magenta));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .header-badge {
    background: rgba(0,240,255,0.08);
    border: 1px solid rgba(0,240,255,0.3);
    color: var(--cyan);
    font-size: 0.75rem;
    font-weight: 700;
    padding: 0.3rem 0.8rem;
    border-radius: 20px;
    text-transform: uppercase;
    letter-spacing: 0.1em;
  }

  .header-right {
    font-size: 0.82rem;
    color: var(--muted);
    font-family: 'Orbitron', sans-serif;
    letter-spacing: 0.05em;
  }

  .live-dot {
    display: inline-block; width: 8px; height: 8px;
    border-radius: 50%; background: #00ff88;
    box-shadow: 0 0 8px #00ff88;
    animation: blink 1.5s ease-in-out infinite;
    margin-right: 6px;
  }
  @keyframes blink { 0%,100% { opacity:1; } 50% { opacity:0.3; } }

  /* â”€â”€ MAIN â”€â”€ */
  main {
    position: relative; z-index: 1;
    padding: 2rem;
    max-width: 1600px;
    margin: 0 auto;
  }

  /* â”€â”€ KPI CARDS â”€â”€ */
  .kpi-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1rem;
    margin-bottom: 2rem;
  }

  .kpi-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 2px;
    padding: 1.5rem;
    position: relative;
    overflow: hidden;
    clip-path: polygon(0 0, 100% 0, 100% calc(100% - 14px), calc(100% - 14px) 100%, 0 100%);
    transition: border-color 0.3s, transform 0.3s;
  }

  .kpi-card::before {
    content: '';
    position: absolute; top: 0; left: 0; right: 0; height: 2px;
    background: var(--accent, linear-gradient(90deg, var(--cyan), var(--magenta)));
  }

  .kpi-card::after {
    content: '';
    position: absolute; inset: 0;
    background: radial-gradient(ellipse at top left, rgba(0,240,255,0.04), transparent 60%);
    pointer-events: none;
  }

  .kpi-card:hover { border-color: rgba(0,240,255,0.4); transform: translateY(-4px); }

  .kpi-label {
    font-size: 0.72rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--muted);
    margin-bottom: 0.8rem;
    display: flex; align-items: center; gap: 0.5rem;
  }

  .kpi-icon { font-size: 1rem; }

  .kpi-value {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.9rem;
    font-weight: 900;
    background: linear-gradient(135deg, #fff 0%, var(--cyan) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    line-height: 1;
    margin-bottom: 0.5rem;
  }

  .kpi-sub {
    font-size: 0.78rem;
    color: var(--muted);
    display: flex; align-items: center; gap: 0.4rem;
  }

  .kpi-trend {
    color: #00ff88;
    font-weight: 700;
    font-size: 0.78rem;
  }

  /* â”€â”€ SECTION TITLE â”€â”€ */
  .section-label {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--cyan);
    font-weight: 700;
    margin-bottom: 0.3rem;
  }

  .section-title {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.3rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    color: #fff;
  }

  /* â”€â”€ CHART GRID â”€â”€ */
  .charts-row {
    display: grid;
    gap: 1rem;
    margin-bottom: 1rem;
  }

  .row-2 { grid-template-columns: 1fr 1fr; }
  .row-3 { grid-template-columns: 2fr 1fr 1fr; }
  .row-2-1 { grid-template-columns: 2fr 1fr; }

  .chart-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 2px;
    padding: 1.5rem;
    position: relative;
    overflow: hidden;
    transition: border-color 0.3s;
  }

  .chart-card:hover { border-color: rgba(0,240,255,0.3); }

  .chart-card::before {
    content: '';
    position: absolute; top: 0; left: 0; right: 0; height: 1px;
    background: linear-gradient(90deg, transparent, var(--cyan), transparent);
    opacity: 0.5;
  }

  .chart-header {
    display: flex; justify-content: space-between; align-items: flex-start;
    margin-bottom: 1.2rem;
  }

  .chart-title {
    font-family: 'Orbitron', sans-serif;
    font-size: 0.85rem;
    font-weight: 700;
    color: #fff;
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }

  .chart-subtitle {
    font-size: 0.72rem;
    color: var(--muted);
    margin-top: 0.2rem;
  }

  .chart-tag {
    background: rgba(0,240,255,0.08);
    border: 1px solid rgba(0,240,255,0.2);
    color: var(--cyan);
    font-size: 0.68rem;
    font-weight: 700;
    padding: 0.2rem 0.6rem;
    border-radius: 20px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    white-space: nowrap;
  }

  .chart-wrap { position: relative; }

  /* â”€â”€ TABLE â”€â”€ */
  .table-wrap { overflow-x: auto; }

  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.85rem;
  }

  thead tr {
    border-bottom: 1px solid rgba(0,240,255,0.2);
  }

  th {
    text-align: left;
    padding: 0.7rem 1rem;
    font-size: 0.68rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--cyan);
    font-weight: 700;
    font-family: 'Orbitron', sans-serif;
    white-space: nowrap;
  }

  td {
    padding: 0.7rem 1rem;
    border-bottom: 1px solid rgba(255,255,255,0.04);
    color: rgba(255,255,255,0.85);
    font-weight: 500;
  }

  tbody tr:hover { background: rgba(0,240,255,0.03); }

  .rank-badge {
    display: inline-flex; align-items: center; justify-content: center;
    width: 24px; height: 24px;
    border-radius: 50%;
    font-family: 'Orbitron', sans-serif;
    font-size: 0.68rem;
    font-weight: 700;
  }

  .rank-1 { background: rgba(255,215,0,0.15); color: #ffd700; border: 1px solid rgba(255,215,0,0.4); }
  .rank-2 { background: rgba(192,192,192,0.15); color: #c0c0c0; border: 1px solid rgba(192,192,192,0.4); }
  .rank-3 { background: rgba(205,127,50,0.15); color: #cd7f32; border: 1px solid rgba(205,127,50,0.4); }
  .rank-n { background: rgba(255,255,255,0.05); color: var(--muted); border: 1px solid rgba(255,255,255,0.1); }

  .bar-cell { display: flex; align-items: center; gap: 0.6rem; }

  .mini-bar-wrap { flex: 1; height: 4px; background: rgba(255,255,255,0.06); border-radius: 2px; }
  .mini-bar { height: 100%; border-radius: 2px; background: linear-gradient(90deg, var(--cyan), var(--magenta)); }

  .status-pill {
    display: inline-block;
    padding: 0.15rem 0.6rem;
    border-radius: 20px;
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }

  .pill-green { background: rgba(0,255,136,0.12); color: #00ff88; border: 1px solid rgba(0,255,136,0.3); }
  .pill-blue  { background: rgba(0,102,255,0.12); color: #66aaff; border: 1px solid rgba(0,102,255,0.3); }
  .pill-yellow { background: rgba(255,237,78,0.12); color: var(--yellow); border: 1px solid rgba(255,237,78,0.3); }
  .pill-red   { background: rgba(255,60,60,0.12); color: #ff6060; border: 1px solid rgba(255,60,60,0.3); }

  /* â”€â”€ FOOTER â”€â”€ */
  footer {
    position: relative; z-index: 1;
    text-align: center;
    padding: 2rem;
    color: var(--muted);
    font-size: 0.78rem;
    border-top: 1px solid var(--border);
    margin-top: 2rem;
    letter-spacing: 0.06em;
  }

  footer span { color: var(--cyan); }

  /* â”€â”€ RESPONSIVE â”€â”€ */
  @media (max-width: 1100px) {
    .kpi-grid { grid-template-columns: repeat(2, 1fr); }
    .row-3 { grid-template-columns: 1fr 1fr; }
    .row-2-1 { grid-template-columns: 1fr; }
  }

  @media (max-width: 700px) {
    main { padding: 1rem; }
    .kpi-grid { grid-template-columns: 1fr 1fr; }
    .row-2, .row-3, .row-2-1 { grid-template-columns: 1fr; }
    .kpi-value { font-size: 1.4rem; }
    header { padding: 0.8rem 1rem; }
    .logo-text { font-size: 0.85rem; }
  }
</style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="header-left">
    <div class="logo-text">IRY / SALES DASHBOARD</div>
    <div class="header-badge">Analytics</div>
  </div>
  <div class="header-right">
    <span class="live-dot"></span>Jan 2023 â€“ Dec 2024
  </div>
</header>

<main>

  <!-- KPI CARDS -->
  <div class="kpi-grid" id="kpiGrid">
    <div class="kpi-card">
      <div class="kpi-label"><span class="kpi-icon">ðŸ’°</span> Total Revenue</div>
      <div class="kpi-value" id="kv1">Rp 0</div>
      <div class="kpi-sub"><span class="kpi-trend">â†‘ 2 Tahun</span> data transaksi</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label"><span class="kpi-icon">ðŸ›’</span> Total Orders</div>
      <div class="kpi-value" id="kv2">0</div>
      <div class="kpi-sub"><span class="kpi-trend">âœ“ Selesai</span> dari 3.000 transaksi</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label"><span class="kpi-icon">ðŸ‘¥</span> Total Pelanggan</div>
      <div class="kpi-value" id="kv3">0</div>
      <div class="kpi-sub">unique customers</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label"><span class="kpi-icon">ðŸ“ˆ</span> Avg Order Value</div>
      <div class="kpi-value" id="kv4">Rp 0</div>
      <div class="kpi-sub">per transaksi selesai</div>
    </div>
  </div>

  <!-- ROW 1: Revenue Trend (full width) -->
  <div class="charts-row" style="margin-bottom:1rem;">
    <div class="chart-card">
      <div class="chart-header">
        <div>
          <div class="chart-title">Revenue & Orders Trend</div>
          <div class="chart-subtitle">Monthly performance Jan 2023 â€“ Dec 2024</div>
        </div>
        <div class="chart-tag">24 Bulan</div>
      </div>
      <div class="chart-wrap" style="height:260px;">
        <canvas id="trendChart"></canvas>
      </div>
    </div>
  </div>

  <!-- ROW 2: Kategori + Channel + Status -->
  <div class="charts-row row-3" style="margin-bottom:1rem;">
    <div class="chart-card">
      <div class="chart-header">
        <div>
          <div class="chart-title">Revenue by Kategori</div>
          <div class="chart-subtitle">Kontribusi per kategori produk</div>
        </div>
        <div class="chart-tag">7 Kategori</div>
      </div>
      <div class="chart-wrap" style="height:220px;">
        <canvas id="kategoriChart"></canvas>
      </div>
    </div>
    <div class="chart-card">
      <div class="chart-header">
        <div>
          <div class="chart-title">Sales Channel</div>
          <div class="chart-subtitle">Distribusi channel penjualan</div>
        </div>
        <div class="chart-tag">6 Channel</div>
      </div>
      <div class="chart-wrap" style="height:220px;">
        <canvas id="channelChart"></canvas>
      </div>
    </div>
    <div class="chart-card">
      <div class="chart-header">
        <div>
          <div class="chart-title">Order Status</div>
          <div class="chart-subtitle">Breakdown status seluruh order</div>
        </div>
        <div class="chart-tag">3.000 Order</div>
      </div>
      <div class="chart-wrap" style="height:220px;">
        <canvas id="statusChart"></canvas>
      </div>
    </div>
  </div>

  <!-- ROW 3: Salesperson Table + Top Kota -->
  <div class="charts-row row-2-1" style="margin-bottom:1rem;">
    <div class="chart-card">
      <div class="chart-header">
        <div>
          <div class="chart-title">Salesperson Performance</div>
          <div class="chart-subtitle">Revenue & jumlah order per salesperson</div>
        </div>
        <div class="chart-tag">10 Sales</div>
      </div>
      <div class="table-wrap">
        <table id="spTable">
          <thead>
            <tr>
              <th>#</th>
              <th>Nama</th>
              <th>Revenue</th>
              <th>Orders</th>
              <th>Share</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
    <div class="chart-card">
      <div class="chart-header">
        <div>
          <div class="chart-title">Top Kota</div>
          <div class="chart-subtitle">Revenue per kota</div>
        </div>
        <div class="chart-tag">9 Kota</div>
      </div>
      <div class="chart-wrap" style="height:300px;">
        <canvas id="kotaChart"></canvas>
      </div>
    </div>
  </div>

  <!-- ROW 4: Top Produk full width -->
  <div class="charts-row" style="margin-bottom:1rem;">
    <div class="chart-card">
      <div class="chart-header">
        <div>
          <div class="chart-title">Top 8 Produk by Revenue</div>
          <div class="chart-subtitle">Produk dengan kontribusi revenue tertinggi</div>
        </div>
        <div class="chart-tag">Best Sellers</div>
      </div>
      <div class="chart-wrap" style="height:220px;">
        <canvas id="produkChart"></canvas>
      </div>
    </div>
  </div>

</main>

<footer>
  Built by <span>Muhamad Irpan Yasin</span> &nbsp;Â·&nbsp; Sales Analytics Dashboard &nbsp;Â·&nbsp; Data: Jan 2023 â€“ Dec 2024
</footer>

<script>
// â”€â”€ DATA â”€â”€
const D = {
  months: ["2023-01","2023-02","2023-03","2023-04","2023-05","2023-06","2023-07","2023-08","2023-09","2023-10","2023-11","2023-12","2024-01","2024-02","2024-03","2024-04","2024-05","2024-06","2024-07","2024-08","2024-09","2024-10","2024-11","2024-12"],
  monthly_rev: [410955800,389499600,619864600,508419400,545962200,604156600,590282600,649238000,376512600,415469000,369902000,453842500,417207900,489317400,649934900,644148200,708562600,817314400,813318600,886521900,505712400,480108400,379143400,464350600],
  monthly_orders: [84,78,108,76,85,78,85,96,70,75,62,80,83,80,89,78,77,96,94,107,75,98,78,76],
  kat_labels: ["Komputer","Aksesoris","Tablet","Audio","Handphone","Kamera","Elektronik"],
  kat_values: [3803043000,2260828100,1717089200,963775900,2133910300,1134305600,1176793500],
  ch_labels: ["WhatsApp","Shopee","Offline","Tiktok Shop","Website","Tokopedia"],
  ch_values: [1280684800,3102732700,4180100200,672758700,1360171400,2593297800],
  sp_labels: ["Ahmad Fauzi","Budi Santoso","Dewi Lestari","Doni Firmansyah","Hendra Wijaya","Nina Kusuma","Rina Marlina","Rizky Pratama","Siti Rahayu","Yuli Astuti"],
  sp_rev: [997015300,962452700,980396500,876554100,767510600,1094372200,1094367800,1062282700,1052669000,1168777100],
  sp_orders: [148,147,151,135,143,170,162,162,160,161],
  kota_labels: ["Jakarta","Surabaya","Bekasi","Medan","Bandung","Depok","Semarang","Makassar","Malang"],
  kota_values: [2754875100,1488123200,1478476100,1436858500,1323536400,1226991900,1189050800,1156281200,1135552400],
  status_labels: ["Selesai","Dikirim","Diproses","Dikembalikan"],
  status_values: [2008,313,341,338],
  top_produk_labels: ["Laptop ProBook 14","Laptop Gaming ASUS","Tablet iPad Air","Smartphone iPhone 15","Tablet Samsung Tab S9","Smartphone Xiaomi 13","PC Desktop Core i7","Kamera Mirrorless Sony"],
  top_produk_values: [1352591800,1311307000,916371800,851631100,800717400,690228800,657411800,626346500],
  total_rev: 13189745600,
  total_orders: 2008,
  total_customers: 200,
  avg_order: 6568598.4,
};

// â”€â”€ FORMAT â”€â”€
function fmtRp(v) {
  if (v >= 1e12) return 'Rp ' + (v/1e12).toFixed(1) + 'T';
  if (v >= 1e9)  return 'Rp ' + (v/1e9).toFixed(1)  + 'M';
  if (v >= 1e6)  return 'Rp ' + (v/1e6).toFixed(1)  + 'Jt';
  return 'Rp ' + v.toLocaleString('id-ID');
}
function fmtFull(v) {
  return 'Rp ' + Math.round(v).toLocaleString('id-ID');
}

// â”€â”€ KPI COUNTER ANIMATION â”€â”€
function animateCounter(el, target, fmt) {
  let start = 0, duration = 1600;
  let startTime = null;
  function step(ts) {
    if (!startTime) startTime = ts;
    let prog = Math.min((ts - startTime) / duration, 1);
    let ease = 1 - Math.pow(1 - prog, 3);
    el.textContent = fmt(target * ease);
    if (prog < 1) requestAnimationFrame(step);
    else el.textContent = fmt(target);
  }
  requestAnimationFrame(step);
}

window.addEventListener('load', () => {
  animateCounter(document.getElementById('kv1'), D.total_rev, v => 'Rp ' + (v/1e12).toFixed(2) + 'T');
  animateCounter(document.getElementById('kv2'), D.total_orders, v => Math.round(v).toLocaleString('id-ID'));
  animateCounter(document.getElementById('kv3'), D.total_customers, v => Math.round(v).toLocaleString('id-ID'));
  animateCounter(document.getElementById('kv4'), D.avg_order, v => fmtRp(v));
});

// â”€â”€ CHART DEFAULTS â”€â”€
Chart.defaults.color = '#7a7a9a';
Chart.defaults.font.family = 'Rajdhani';
Chart.defaults.font.size = 12;
Chart.defaults.plugins.legend.display = false;
Chart.defaults.plugins.tooltip.backgroundColor = '#0d0d14';
Chart.defaults.plugins.tooltip.borderColor = 'rgba(0,240,255,0.3)';
Chart.defaults.plugins.tooltip.borderWidth = 1;
Chart.defaults.plugins.tooltip.titleColor = '#00f0ff';
Chart.defaults.plugins.tooltip.bodyColor = '#ffffff';
Chart.defaults.plugins.tooltip.padding = 10;
Chart.defaults.plugins.tooltip.cornerRadius = 2;

const CYAN = '#00f0ff';
const MAGENTA = '#ff00ea';
const YELLOW = '#ffed4e';
const BLUE = '#0066ff';
const GREEN = '#00ff88';

// â”€â”€ 1. TREND CHART â”€â”€
new Chart(document.getElementById('trendChart'), {
  type: 'bar',
  data: {
    labels: D.months.map(m => {
      const [y, mo] = m.split('-');
      return ['Jan','Feb','Mar','Apr','Mei','Jun','Jul','Agt','Sep','Okt','Nov','Des'][+mo-1] + ' ' + y.slice(2);
    }),
    datasets: [
      {
        type: 'bar',
        label: 'Revenue',
        data: D.monthly_rev,
        backgroundColor: 'rgba(0,240,255,0.18)',
        borderColor: 'rgba(0,240,255,0.5)',
        borderWidth: 1,
        yAxisID: 'y',
        borderRadius: 2,
      },
      {
        type: 'line',
        label: 'Orders',
        data: D.monthly_orders,
        borderColor: MAGENTA,
        backgroundColor: 'rgba(255,0,234,0.1)',
        borderWidth: 2,
        pointBackgroundColor: MAGENTA,
        pointRadius: 3,
        pointHoverRadius: 5,
        fill: false,
        tension: 0.4,
        yAxisID: 'y2',
      }
    ]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    interaction: { mode: 'index', intersect: false },
    plugins: {
      legend: { display: true, position: 'top', labels: { color: '#7a7a9a', font: { size: 11 }, boxWidth: 12, padding: 16 } },
      tooltip: {
        callbacks: {
          label: ctx => ctx.dataset.label === 'Revenue' ? ' ' + fmtRp(ctx.raw) : ' ' + ctx.raw + ' orders'
        }
      }
    },
    scales: {
      x: { grid: { color: 'rgba(255,255,255,0.04)' }, ticks: { font: { size: 10 }, maxRotation: 45 } },
      y: {
        position: 'left',
        grid: { color: 'rgba(255,255,255,0.05)' },
        ticks: { callback: v => fmtRp(v), font: { size: 10 } }
      },
      y2: {
        position: 'right',
        grid: { drawOnChartArea: false },
        ticks: { font: { size: 10 } }
      }
    }
  }
});

// â”€â”€ 2. KATEGORI CHART â”€â”€
const katColors = ['rgba(0,240,255,0.7)','rgba(255,0,234,0.7)','rgba(255,237,78,0.7)','rgba(0,102,255,0.7)','rgba(0,255,136,0.7)','rgba(255,120,50,0.7)','rgba(180,100,255,0.7)'];
new Chart(document.getElementById('kategoriChart'), {
  type: 'doughnut',
  data: {
    labels: D.kat_labels,
    datasets: [{
      data: D.kat_values,
      backgroundColor: katColors,
      borderColor: '#050508',
      borderWidth: 3,
      hoverOffset: 8,
    }]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    cutout: '60%',
    plugins: {
      legend: { display: true, position: 'right', labels: { color: '#a0a0b8', font: { size: 10 }, padding: 8, boxWidth: 10 } },
      tooltip: { callbacks: { label: ctx => ' ' + ctx.label + ': ' + fmtRp(ctx.raw) } }
    }
  }
});

// â”€â”€ 3. CHANNEL CHART â”€â”€
const chColors = ['rgba(0,255,136,0.7)','rgba(255,108,0,0.7)','rgba(0,240,255,0.7)','rgba(255,0,120,0.7)','rgba(0,102,255,0.7)','rgba(255,237,78,0.7)'];
new Chart(document.getElementById('channelChart'), {
  type: 'polarArea',
  data: {
    labels: D.ch_labels,
    datasets: [{
      data: D.ch_values,
      backgroundColor: chColors,
      borderColor: '#050508',
      borderWidth: 2,
    }]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    plugins: {
      legend: { display: true, position: 'right', labels: { color: '#a0a0b8', font: { size: 10 }, padding: 8, boxWidth: 10 } },
      tooltip: { callbacks: { label: ctx => ' ' + ctx.label + ': ' + fmtRp(ctx.raw) } }
    },
    scales: { r: { grid: { color: 'rgba(255,255,255,0.06)' }, ticks: { display: false } } }
  }
});

// â”€â”€ 4. STATUS CHART â”€â”€
new Chart(document.getElementById('statusChart'), {
  type: 'doughnut',
  data: {
    labels: D.status_labels,
    datasets: [{
      data: D.status_values,
      backgroundColor: ['rgba(0,255,136,0.75)','rgba(0,102,255,0.75)','rgba(255,237,78,0.75)','rgba(255,60,60,0.75)'],
      borderColor: '#050508',
      borderWidth: 3,
      hoverOffset: 8,
    }]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    cutout: '55%',
    plugins: {
      legend: { display: true, position: 'bottom', labels: { color: '#a0a0b8', font: { size: 10 }, padding: 8, boxWidth: 10 } },
      tooltip: { callbacks: { label: ctx => ' ' + ctx.label + ': ' + ctx.raw.toLocaleString('id-ID') } }
    }
  }
});

// â”€â”€ 5. KOTA CHART â”€â”€
new Chart(document.getElementById('kotaChart'), {
  type: 'bar',
  data: {
    labels: D.kota_labels,
    datasets: [{
      data: D.kota_values,
      backgroundColor: D.kota_values.map((_, i) => i === 0 ? 'rgba(0,240,255,0.7)' : 'rgba(0,240,255,0.2)'),
      borderColor: CYAN,
      borderWidth: 1,
      borderRadius: 2,
    }]
  },
  options: {
    indexAxis: 'y',
    responsive: true, maintainAspectRatio: false,
    plugins: {
      tooltip: { callbacks: { label: ctx => ' ' + fmtRp(ctx.raw) } }
    },
    scales: {
      x: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { callback: v => fmtRp(v), font: { size: 9 } } },
      y: { grid: { display: false }, ticks: { font: { size: 11 } } }
    }
  }
});

// â”€â”€ 6. TOP PRODUK CHART â”€â”€
new Chart(document.getElementById('produkChart'), {
  type: 'bar',
  data: {
    labels: D.top_produk_labels.map(l => l.length > 20 ? l.slice(0,18)+'â€¦' : l),
    datasets: [{
      data: D.top_produk_values,
      backgroundColor: 'rgba(255,0,234,0.2)',
      borderColor: MAGENTA,
      borderWidth: 1,
      borderRadius: 2,
    }]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    plugins: {
      tooltip: { callbacks: { label: ctx => ' ' + fmtRp(ctx.raw) } }
    },
    scales: {
      x: { grid: { display: false }, ticks: { font: { size: 10 } } },
      y: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { callback: v => fmtRp(v), font: { size: 10 } } }
    }
  }
});

// â”€â”€ 7. SALESPERSON TABLE â”€â”€
(function buildSpTable() {
  const totalRev = D.sp_rev.reduce((a,b) => a+b, 0);
  const sorted = D.sp_labels.map((name, i) => ({ name, rev: D.sp_rev[i], orders: D.sp_orders[i] }))
    .sort((a,b) => b.rev - a.rev);
  const maxRev = sorted[0].rev;
  const tbody = document.querySelector('#spTable tbody');
  const rankClass = i => ['rank-1','rank-2','rank-3'][i] || 'rank-n';
  tbody.innerHTML = sorted.map((sp, i) => `
    <tr>
      <td><span class="rank-badge ${rankClass(i)}">${i+1}</span></td>
      <td style="font-weight:600;">${sp.name}</td>
      <td style="font-family:'Orbitron',sans-serif;font-size:0.8rem;color:#00f0ff;">${fmtRp(sp.rev)}</td>
      <td style="text-align:center;">${sp.orders}</td>
      <td>
        <div class="bar-cell">
          <div class="mini-bar-wrap"><div class="mini-bar" style="width:${(sp.rev/maxRev*100).toFixed(1)}%"></div></div>
          <span style="font-size:0.72rem;color:#7a7a9a;min-width:38px;">${(sp.rev/totalRev*100).toFixed(1)}%</span>
        </div>
      </td>
    </tr>
  `).join('');
})();
</script>
</body>
</html>
